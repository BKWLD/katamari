/*! katamari 26-06-2013 */
function _katamari(){function a(a){if(g.hasOwnProperty(a))return a;if("s"==a.substr(-1)){var b=a.substr(0,a.length-1);if(g.hasOwnProperty(b))return b}return h.hasOwnProperty(a)?h[a]:void 0}function b(a){return"number"==typeof g[a]?g[a]:g[a].ratio}function c(a,c){if(!i.hasOwnProperty(a))return a;var d,e,f,g=i[a];for(d=0;d<g.length;d++){if(e=b(g[d]),0===d&&2>c/e)return g[0];if(2>c/e)return g[d-1];f=e}return g[g.length-1]}function d(a){return"object"==typeof g[a]&&g[a].hasOwnProperty("plural")?g[a].plural:a+"s"}var e,f={precision:1,output:"string"},g={meter:1,kilometer:1e3,mile:1609.34,"garden gnome":.127,bicycle:1.778,elephant:7,"school bus":{ratio:11.2776,plural:"school buses"},dragon:40,"roman colosseum":189,"starship enterprise":641,"golden gate bridge":2737},h={m:"meter",km:"kilometer"},i={"default":["garden gnome","bicycle","elephant","dragon","roman colosseum","starship enterprise","golden gate bridge"]};for(e in g)"object"==typeof g[e]&&g[e].hasOwnProperty("plural")&&(h[g[e].plural]=e);return function(e,g,h){if(h){if("object"==typeof h)for(var j in f)h.hasOwnProperty(j)||(h[j]=f[j])}else h=f;var k=String(e).match(/^([\d.]+) *(.*)$/i),l=parseFloat(k[1]);if(!l)return!1;var m=k[2];if(m||(m="meter"),!(m=a(m)))return!1;if(g||(g="default"),!i.hasOwnProperty(g)&&!(g=a(g)))return!1;var n=b(m);l*=n,g=c(g,l),l/=b(g);var o=Math.pow(10,h.precision);switch(l=Math.round(l*o)/o,h.output){case"string":return l+" "+(1===l?g:d(g));case"number":return l;case"object":return{value:l,unit:g,pluralled:1===l?g:d(g)}}}}!function(a){"undefined"==typeof define&&(define=function(b){var c=b();"undefined"==typeof exports?window[a]=c:module.exports=c}),define(function(){return _katamari()})}("katamari");